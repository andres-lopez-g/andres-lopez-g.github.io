---
common-css:
  - "/assets/css/bootstrap-social.css"
  - "/assets/css/beautifuljekyll.css"
common-ext-css:
  - href: "https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    sri: "sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
  - "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  - "https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"
  - "https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
common-ext-js:
  - href: "https://code.jquery.com/jquery-3.5.1.slim.min.js"
    sri: "sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
  - href: "https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    sri: "sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
  - href: "https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    sri: "sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
common-js:
  - "/assets/js/beautifuljekyll.js"
site-css:
  - "/assets/css/darkmode.css"
---

<!DOCTYPE html>
<html lang="{{ page.language | default: site.language | default: 'en' }}">
<!-- Beautiful Jekyll 6.0.1 | Copyright Dean Attali 2023 -->
{% include head.html %}

<body>
  {% include gtm_body.html %}

  {% include nav.html %}

  <!-- Dark mode toggle button -->
  <button id="darkModeToggle" style="position:fixed;bottom:2rem;right:2rem;z-index:1001;padding:0.7em 1.2em;background:#1b1c1d;color:#e3e3e3;border:1px solid #2c2d2e;border-radius:2em;box-shadow:0 0 0 1px #2c2d2e,0 4px 14px -4px rgba(0,0,0,.6);cursor:pointer;transition:background .25s,box-shadow .4s;">🌙 Dark Mode</button>

  <!-- Particles.js background for flare -->
  <div id="particles-js"></div>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles": {
        "number": {"value": 40},
        "color": {"value": "#9aa4b2"}, <!-- color suave para modo claro -->
        "shape": {"type": "circle"},
        "opacity": {"value": 0.25},
        "size": {"value": 3},
        "move": {"enable": true, "speed": 1}
      },
      "interactivity": {
        "events": {"onhover": {"enable": true, "mode": "repulse"}}
      }
    });
  </script>
  <style>
    #particles-js {
      position: fixed;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      top: 0; left: 0;
      pointer-events: none;
    }
    body > *:not(#particles-js) {
      position: relative;
      z-index: 1;
    }
  </style>

  <script>
    // Dark mode toggle logic
    const toggleBtn = document.getElementById('darkModeToggle');

    // Ajusta el color de partículas según el modo
    function setParticlesColor(hex) {
      if (window.pJSDom && pJSDom.length) {
        const p = pJSDom[0].pJS;
        if (p?.particles?.color) p.particles.color.value = hex;
        if (p?.fn?.particlesRefresh) p.fn.particlesRefresh();
      }
    }

    function applyDarkMode(on) {
      if (on) {
        document.body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'on');
        if (toggleBtn) toggleBtn.textContent = '☀️ Light Mode';
        setParticlesColor('#4a4a4a'); // gris medio en oscuro
      } else {
        document.body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'off');
        if (toggleBtn) toggleBtn.textContent = '🌙 Dark Mode';
        setParticlesColor('#7d7d7d'); // gris suave en claro
      }
    }

    const saved = localStorage.getItem('darkMode');
    const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    applyDarkMode(saved ? saved === 'on' : prefers);

    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        applyDarkMode(!document.body.classList.contains('dark-mode'));
      });
    }
  </script>

  {{ content }}

  {% include footer.html %}

  {% include footer-scripts.html %}

</body>
</html>
